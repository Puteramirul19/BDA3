@{
    ViewData["Title"] = "Submit Recovery";
}


@section Styles  {

    <!-- Tweaks for older IEs-->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->

    <link rel="stylesheet" href="~/assets/css/bootstrap-select/bootstrap-select.min.css">
    <style>
    </style>
}
@{
    <div class="content-inner active">
        <div class="container-fluid">
            <!-- Begin Page Header-->
            <div class="row">
                <div class="page-header">
                    <div class="d-flex align-items-center">
                        <h2 class="page-header-title">Bank Draft Recovery</h2>
                        <div>
                            <ul class="breadcrumb">
                                <li class="breadcrumb-item"><a href="db-default.html"><i class="ti ti-home"></i></a></li>
                                <li class="breadcrumb-item"><a href="#">New Application</a></li>
                                <li class="breadcrumb-item active">Wang Cagaran</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!-- End Page Header -->
            <div class="row flex-row">
                <div class="col-xl-12">
                    <!-- Form -->
                    <div class="widget has-shadow">
                        @*<div class="widget-header bordered no-actions d-flex align-items-center">
                                <h4>Wang Cagaran</h4>
                            </div>*@
                        <div class="widget-body">
                            <div class="row flex-row justify-content-center">
                                <div class="col-xl-12">
                                    <div id="rootwizard">
                                        @Html.Partial("_StatusBar.cshtml")
                                        <div class="tab-content" style="font-family: Arial">

                                            <div class="body-content">
                                                <div>
                                                    @*style="text-align:center; border-bottom: 2px solid; border-bottom-color:blue"*@
                                                    @*<h4>Submitted by: En. Requestor</h4>*@
                                                    <br>
                                                </div>

                                                <div class="widget has-shadow">
                                                    <div class="widget-body sliding-tabs">
                                                        <ul class="nav nav-tabs form-tab" id="ul-form-tab" role="tablist">
                                                            <li class="nav-item">
                                                                <a class="nav-link" id="base-tab-1" data-toggle="tab" href="#tab-1" role="tab" aria-controls="tab-1" aria-selected="true">Create Details</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link" id="base-tab-2" data-toggle="tab" href="#tab-2" role="tab" aria-controls="tab-2" aria-selected="false">Process Details</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link active" id="base-tab-3" data-toggle="tab" href="#tab-3" role="tab" aria-controls="tab-3" aria-selected="false">Submit Details</a>
                                                            </li>
                                                        </ul>

                                                        <div class="tab-content pt-3">
                                                            <div class="tab-pane fade" id="tab-1" role="tabpanel" aria-labelledby="base-tab-1">
                                                                @using (Html.BeginForm("Create", "WangHangus", Model, FormMethod.Post, false, new { @id = "formCreateRecovery", @class = "form-horizontal needs-validation", @novalidate = "novalidate" }))
                                                                {
                                                                    @Html.Partial("_CreateDetails.cshtml")
                                                                    @Html.Partial("_ActionHistory.cshtml")
                                                                    @Html.Partial("_Comments.cshtml")
                                                                }
                                                            </div>
                                                            <div class="tab-pane fade" id="tab-2" role="tabpanel" aria-labelledby="base-tab-2">
                                                                @using (Html.BeginForm("Create", "WangHangus", Model, FormMethod.Post, false, new { @id = "formProcessRecovery", @class = "form-horizontal needs-validation", @novalidate = "novalidate" }))
                                                                {
                                                                    @Html.Partial("_ProcessDetails.cshtml")
                                                                    @Html.Partial("_Comments.cshtml")
                                                                }
                                                            </div>
                                                            <div class="tab-pane fade active show" id="tab-3" role="tabpanel" aria-labelledby="base-tab-3">
                                                                @using (Html.BeginForm("Create", "WangHangus", Model, FormMethod.Post, false, new { @id = "formSubmitRecovery", @class = "form-horizontal needs-validation", @novalidate = "novalidate" }))
                                                                {
                                                                    @Html.Partial("_SubmitDetails.cshtml")
                                                                    @Html.Partial("_Comments.cshtml")
                                                                }
                                                            </div>
                                                            <div class="tab-pane fade" id="tab-4" role="tabpanel" aria-labelledby="base-tab-4">

                                                            </div>
                                                            <div class="tab-pane fade" id="tab-5" role="tabpanel" aria-labelledby="base-tab-5">
                                                                @*@Html.Partial("_ActionHistory.cshtml")*@
                                                            </div>
                                                        </div>
                                                        @Html.Partial("_ActionButton.cshtml")
                                                    </div>
                                                </div>
                                                
                                            </div>
                                            @*<a id="btnAddAccounting" class="btn btn-secondary ripple" data-toggle="modal" data-target="#add-accounting-table-modal">Add</a>*@

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End Form -->
                </div>
            </div>
            <!-- End Row -->
        </div>
        <!-- End Container -->
        <!-- Begin Page Footer-->
        <!-- End Page Footer -->
        <a href="#" class="go-top"><i class="la la-arrow-up"></i></a>
        <!-- Offcanvas Sidebar -->
        @*@Html.Partial("_Log.cshtml")*@
        <!-- End Offcanvas Sidebar -->
    </div>
}


@section Scripts{
    @*Validation script*@
    <!--  validation script  -->
    <script src="~/assets/vendors/jsgrid-1.5.3/src/jsgrid.validation.js"></script>
    <script src="~/js/jquery.validate.js"></script>
    @*added by Hanif 08112019*@

    <script src="~/assets/js/components/wizard/form-wizard.min.js"></script>
    <script src="~/assets/vendors/js/bootstrap-select/bootstrap-select.min.js"></script>

   @*Addedby Hanif 05122019*@
    <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>

    <script>
        $(function () {
            $("nav").addClass("shrinked");
            $("#SubmitGroupBtn").show();
            $("#ProcessGroupBtn").hide();
            $("#CreateGroupBtn").hide();
            $("#printChecklist").show();
            $("#uploadChecklist").hide();
            $("#printRecoveryLetter").show();
            $("#uploadRecoveryLetter").hide();
            $("#tab-1 input[type=text]").attr("disabled", "disabled");
            $("#tab-2 input[type=number]").attr("disabled", "disabled");
            $("#tab-2 input[type=text]").attr("disabled", "disabled");
            $("#li-3").click();
            $(".custom-select").attr('disabled', true);
            $('[data-toggle="tooltip"]').tooltip()
        });

        $('#btn-end-submitted').on('click', function (e) {
            window.location.href = '/Recovery/Receive'
        });

        $(document).ready(function () {
            $('#ddlRecoveryPercent').on('change', function (e) {
                if (this.value == "2") {
                    $('#pnl_third_form').show();
                    $('#pnl_first_form').hide();
                    $('#pnl_second_form').hide();
                } else {
                    $('#pnl_first_form').show();
                    $('#pnl_second_form').show();
                    $('#pnl_third_form').hide();
                }
            });

            //First Supporting Doc Table begins

            var t = $('#suppDoc').DataTable({ searching: false, paging: false, info: false });
            //var t = $('#suppDoc').DataTable();
            var counter = 1;
            $('#addRow').on('click', function () {
                t.row.add([
                    counter,
                    'Attachment ' + counter,
                    '<td class="td-actions"><div class="file-upload before-submit"><input id="" name="checklist" type="file"></div></td>',
                    '<a><i class="ion-trash-a"></i></a>'
                ]).draw(false);

                counter++;
            });

            $('#suppDoc tbody').on('click', '.ion-trash-a', function () {
                t
                    .row($(this).parents('tr'))
                    .remove()
                    .draw();
                counter--;
            });

            // Automatically add a first row of data
            $('#addRow').click();
            $('.ion-trash-a').click();

            //First supporting docs End

            //Second supporting docs begin

            var t2 = $('#suppDoc2').DataTable({ searching: false, paging: false, info: false });
            //var t = $('#suppDoc').DataTable();
            var counter2 = 1;
            $('#addRow2').on('click', function () {
                t2.row.add([
                    counter2,
                    'Attachment ' + counter2,
                    '<td class="td-actions"><div class="file-upload before-submit"><input id="" name="Doc' + counter2 + '" type="file"></div></td>',
                    '<a><i class="ion-trash-a"></i></a>'
                ]).draw(false);

                counter2++;
            });

            $('#suppDoc2 tbody').on('click', '.ion-trash-a', function () {
                t2
                    .row($(this).parents('tr'))
                    .remove()
                    .draw();
                counter2--;
            });

            // Automatically add a first row of data
            $('#addRow2').click();
            $('.ion-trash-a').click();


            //Third datatable 

            var t3 = $('#suppDoc3').DataTable({ searching: false, paging: false, info: false });
            //var t = $('#suppDoc').DataTable();
            var counter3 = 1;
            $('#addRow3').on('click', function () {
                t3.row.add([
                    counter3,
                    'Attachment ' + counter3,
                    '<td class="td-actions"><div class="file-upload before-submit"><input id="" name="checklist" type="file"></div></td>',
                    '<a><i class="ion-trash-a"></i></a>'
                ]).draw(false);

                counter3++;
            });

            $('#suppDoc3 tbody').on('click', '.ion-trash-a', function () {
                t3
                    .row($(this).parents('tr'))
                    .remove()
                    .draw();
                counter3--;
            });

            // Automatically add a first row of data
            $('#addRow3').click();
            $('.ion-trash-a').click();
        });
    </script>

}


