@model BDA.ViewModel.BankDraftViewModel

@{
    ViewData["Title"] = "Wang Cagaran";
    var status = Model.Status;
    var userId = User.Identity.Name;
}


@section Styles  {

    <!-- Tweaks for older IEs-->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->

    <link rel="stylesheet" href="~/assets/css/bootstrap-select/bootstrap-select.min.css">
    <style>
    </style>
}

<div class="content-inner active">
    <div class="container-fluid">
        <!-- Begin Page Header-->
        <div class="row">
            <div class="page-header">
                <div class="d-flex align-items-center">
                    <h2 class="page-header-title">Permohonan Deraf Bank <span> - Wang Cagaran</span></h2>
                    <div>
                        <ul class="breadcrumb">
                            <li class="breadcrumb-item"><a href="db-default.html"><i class="ti ti-home"></i></a></li>
                            <li class="breadcrumb-item"><a href="#">New Application</a></li>
                            <li class="breadcrumb-item active">Wang Cagaran</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Page Header -->
        <div class="row flex-row">
            <div class="col-xl-12">
                <!-- Form -->
                <div class="widget has-shadow">
                    @*<div class="widget-header bordered no-actions d-flex align-items-center">
                            <h4>Permohonan Deraf Bank</h4>
                        </div>*@
                    <div class="widget-body">
                        <div class="row flex-row justify-content-center">
                            <div class="col-xl-12">
                                <div id="rootwizard">
                                    @Html.Partial("_StatusPendingAction.cshtml")
                                    @Html.Partial("_StatusBar.cshtml")
                                    <div class="tab-content" style="font-family: Arial">

                                        <div class="body-content">
                                            <input type="hidden" id="hdnRefNo" value="@Model.RefNo" class="form-control">
                                            <div>
                                                @*<h4>Submitted by: En. Requestor</h4>*@
                                                <br>
                                            </div>
                                            <div class="widget has-shadow">
                                                <div class="widget-body sliding-tabs">
                                                    <ul class="nav nav-tabs form-tab" id="ul-form-tab" role="tablist">
                                                        <li class="nav-item">
                                                            <a class="nav-link @((status == "Draft" || status == "RejectedVerify" ||status == "RejectedApprove" || status == "Submitted" || status == "Verified" || status == "Approved" || status == "Complete")? "active" : "")" id="base-tab-1" data-toggle="tab" href="#tab-1" role="tab" aria-controls="tab-1" aria-selected="true">Main Application</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link @(status == "Accepted" ? "active": "") @((status == "Accepted" || status == "Processed" || status == "Issued" || status == "Complete")? "" : "disabled")" id="base-tab-2" data-toggle="tab" href="#tab-2" role="tab" aria-controls="tab-2" aria-selected="false">Bank Details</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link @(status == "Processed" ? "active": "") @((status == "Processed" || status == "Issued" || status == "Complete")? "" : "disabled")" id="base-tab-3" data-toggle="tab" href="#tab-3" role="tab" aria-controls="tab-3" aria-selected="false">Bank Draft Issued</a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link @(status == "Issued" ? "active": "") @((status == "Issued" || status == "Complete")? "" : "disabled")" id="base-tab-4" data-toggle="tab" href="#tab-4" role="tab" aria-controls="tab-4" aria-selected="false">Bank Draft Acceptance</a>
                                                        </li>
                                                    </ul>

                                                    <div class="tab-content pt-3">
                                                        <div class="tab-pane fade @((status == "Draft" || status == "RejectedVerify" ||status == "RejectedApprove" || status == "Submitted" || status == "Verified" || status == "Approved" || status == "Complete")? "active show" : "")" id="tab-1" role="tabpanel" aria-labelledby="base-tab-1">
                                                            @using (Html.BeginForm("Edit", "BankDraft", Model, FormMethod.Post, false, new { @id = "formEditApplication", @class = "form-horizontal", enctype = "multipart/form-data" }))
                                                            {
                                                                @Html.AntiForgeryToken()
                                                                @Html.HiddenFor(x => x.Status)
                                                                @Html.HiddenFor(x => x.WangCagaranViewModel.Id)
                                                                @Html.Partial("_MainForm.cshtml")
                                                                @Html.Partial("_Document.cshtml")
                                                                @Html.Partial("_ApproverList.cshtml")

                                                                if (status != "Draft")
                                                                {
                                                                    @Html.Partial("_ActionHistory.cshtml")
                                                                }
                                                            }
                                                            @using (Html.BeginForm("NextAction", "BankDraft", Model, FormMethod.Post, false, new { @id = "formNextAction", @class = "form-horizontal" }))
                                                            {
                                                                if (status == "Submitted" || status == "Verified" || status == "Approved")
                                                                {
                                                                    @Html.AntiForgeryToken()
                                                                    @Html.HiddenFor(x => x.UserAction)
                                                                    @Html.Partial("_Comment.cshtml")
                                                                }
                                                            }
                                                        </div>
                                                        <div class="tab-pane fade @(status == "Accepted" ? "active show": "")" id="tab-2" role="tabpanel" aria-labelledby="base-tab-2">
                                                            @if (status == "Accepted" || status == "Processed" || status == "Issued" || status == "Complete")
                                                            {
                                                                @using (Html.BeginForm("SaveBankDetails", "BankDraft", Model, FormMethod.Post, false, new { @id = "formSaveBankDetails", @class = "form-horizontal", enctype = "multipart/form-data" }))
                                                                {
                                                                    @Html.HiddenFor(x => x.UserAction)
                                                                    @Html.Partial("_BankDetails.cshtml")
                                                                }
                                                            }
                                                        </div>
                                                        <div class="tab-pane fade @(status == "Processed" ? "active show": "")" id="tab-3" role="tabpanel" aria-labelledby="base-tab-3">
                                                            @if (status == "Processed" || status == "Issued" || status == "Complete")
                                                            {
                                                                @using (Html.BeginForm("SaveBankIssue", "BankDraft", Model, FormMethod.Post, false, new { @id = "formSaveBankIssue", @class = "form-horizontal", enctype = "multipart/form-data" }))
                                                                {
                                                                    @Html.HiddenFor(x => x.UserAction)
                                                                    @Html.Partial("_BDIssued.cshtml")
                                                                }

                                                            }
                                                        </div>
                                                        <div class="tab-pane fade @(status == "Issued" ? "active show": "")" id="tab-4" role="tabpanel" aria-labelledby="base-tab-4">
                                                            @if (status == "Issued" || status == "Complete")
                                                            {
                                                                @using (Html.BeginForm("SaveBankAcceptance", "BankDraft", Model, FormMethod.Post, false, new { @id = "formSaveBankAcceptance", @class = "form-horizontal", enctype = "multipart/form-data" }))
                                                                {
                                                                    @Html.HiddenFor(x => x.UserAction)
                                                                    @Html.Partial("_BDAcceptance.cshtml")
                                                                }
                                                            }
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            @Html.Partial("_ActionButton.cshtml")
                                        </div>


                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End Form -->
            </div>
        </div>
        <!-- End Row -->
    </div>
    <!-- End Container -->
    <!-- Begin Page Footer-->
    <!-- End Page Footer -->
    <a href="#" class="go-top"><i class="la la-arrow-up"></i></a>
    <!-- Offcanvas Sidebar -->
    @*@Html.Partial("_Log.cshtml")*@
    <!-- End Offcanvas Sidebar -->
</div>

<!-- Begin Modal -->



@section Scripts{

    <script src="~/assets/js/components/wizard/form-wizard.min.js"></script>
    <script>

        $(function () {
            $("nav").addClass("shrinked");
            $("#submitGroupBtn").show();

        });

        $(document).ready(function () {
            $("#ddlJKRType").select2({
                minimumResultsForSearch: -1,
                ajax: {
                    url: "/WangCagaran/GetJKRType",
                    dataType: 'json',
                    type: "GET",
                    processResults: function (data) {
                        console.log(data);
                        return {
                            results: $.map(data, function (item) {
                                return {
                                    text: item.name,
                                    id: item.id
                                }

                            })
                        };
                    }
                }
            });
            $("#ddlVerifier").select2({
                minimumResultsForSearch: -1,
                ajax: {
                    url: "/BankDraft/GetAllVerifier",
                    dataType: 'json',
                    type: "GET",
                    processResults: function (data) {
                        console.log(data);
                        return {
                            results: $.map(data, function (item) {
                                return {
                                    text: item.name,
                                    id: item.id
                                }

                            })
                        };
                    }
                }
            });
            $("#ddlApprover").select2({
                minimumResultsForSearch: -1,
                ajax: {
                    url: "/BankDraft/GetAllWCApprover",
                    dataType: 'json',
                    type: "GET",
                    processResults: function (data) {
                        return {
                            results: $.map(data, function (item) {
                                return {
                                    text: item.name,
                                    id: item.id
                                }

                            })
                        };
                    }
                }
            });
            $("#ddlState").select2({
                minimumResultsForSearch: -1,
                ajax: {
                    url: "/BankDraft/GetAllState",
                    dataType: 'json',
                    type: "GET",
                    processResults: function (data) {
                        console.log(data);
                        return {
                            results: $.map(data, function (item) {
                                return {
                                    text: item.name,
                                    id: item.id
                                }

                            })
                        };
                    }
                }
            });
            $("#ddlSendMethod").select2({
                minimumResultsForSearch: -1,
                ajax: {
                    url: "/BankDraft/GetAllSendMethod",
                    dataType: 'json',
                    type: "GET",
                    processResults: function (data) {
                        return {
                            results: $.map(data, function (item) {
                                return {
                                    text: item.name,
                                    id: item.id
                                }

                            })
                        };
                    }
                }
            });

            SetSelectedValue($('#hdnVerifier').val(), "#ddlVerifier");
            SetSelectedValue($('#hdnApprover').val(), "#ddlApprover");
            var status = $("#Status").val();

            if (status != "Draft") {

                $("#submitGroupBtn").hide();
                $(".before-submit").hide();
                $(".after-submit").show();
                $("input[type=text], input[type=checkbox], select, textarea, .submission").attr("disabled", "disabled");
                $(".txaComment").removeAttr('disabled');

                if (status == "RejectedVerify" || status == "RejectedApprove") {
                    $("#stsRejected").show();
                    $("#submitGroupBtn").show();
                    $(".before-submit").show();
                    $(".after-submit").hide();
                    $("#btnDraft").hide();
                    $("input[type=text], input[type=checkbox], select, textarea, .submission").removeAttr('disabled');
                }
                if (status == "Submitted") {
                    $("#stsSubmitted").show();
                    $("#verifyGroupBtn").show();
                    $("#li-2").click();
                }
                else if (status == "Verified") {
                    $("#stsVerified").show();
                    $("#approveGroupBtn").show();
                    $("#li-3").click();
                }
                else if (status == "Approved") {
                    $("#stsApproved").show();
                    $("#acceptGroupBtn").show();
                    $("#li-4").click();
                }
                else if (status == "Accepted") {
                    $("#stsAccepted").show();
                    $("#processGroupBtn").show();
                    $("#li-5").click();
                    $("#tab-2 input, select, textarea").removeAttr('disabled');
                }
                else if (status == "Processed") {
                    $("#stsProcessed").show();
                    $("#issueGroupBtn").show();
                    $(".before-process").hide();
                    $("#li-6").click();
                    $("#tab-3 input, select, textarea").removeAttr('disabled');
                }
                else if (status == "Issued") {
                    $("#stsIssued").show();
                    $("#completeGroupBtn").show();
                    $(".before-process").hide();
                    $(".before-issue").hide();
                    $("#li-7").click();
                    $("#tab-4 input, select, textarea").removeAttr('disabled');
                }
                else if (status == "Complete") {
                    $("#stsCompleted").show();
                    $(".before-process").hide();
                    $(".before-issue").hide();
                    $(".before-complete").hide();
                    $("#li-8").click();
                }
            }

            var ilrn = $("#InstructionLetterRefNo").val();
            if (ilrn !== "") {
                $("#InstructionLetterRefNo").attr("disabled", "disabled");
                $("#btnNewLetter").hide();
                $("#btnViewLetter").show();
                $("#btnRemoveLetter").show();
            }

            var cmrn = $("#CoverMemoRefNo").val();
            if (cmrn !== "") {
                $("#CoverMemoRefNo").attr("disabled", "disabled");
                $("#btnNewMemo").hide();
                $("#btnViewMemo").show();
                $("#btnRemoveMemo").show();
            }

            $("#InstructionLetterRefNo").blur(function (e) {
                $.ajax({
                    type: "POST",
                    url: "/InstructionLetter/SetBDInstructionLetter?LetterRefNo=" + $(this).val() + "&bdRefNo=" + $("#hdnRefNo").val(),
                    processData: false,
                    contentType: false,
                    success: function (data) {
                        if (data.response.statusCode == 200) {
                            ShowNoty("success", data.message);
                            $("#InstructionLetterRefNo").attr("disabled", "disabled");
                            $("#btnNewLetter").hide();
                            $("#btnViewLetter").show();
                            $("#btnRemoveLetter").show();
                        } else {
                            ShowNoty("error", data.message);
                        }
                    }
                });
            });
            $("#CoverMemoRefNo").blur(function (e) {
                $.ajax({
                    type: "POST",
                    url: "/CoverMemo/SetBDCoverMemo?CoverMemoRefNo=" + $(this).val() + "&bdRefNo=" + $("#hdnRefNo").val(),
                    processData: false,
                    contentType: false,
                    success: function (data) {
                        if (data.response.statusCode == 200) {
                            ShowNoty("success", data.message);
                            $("#CoverMemoRefNo").attr("disabled", "disabled");
                            $("#btnNewMemo").hide();
                            $("#btnViewMemo").show();
                            $("#btnRemoveMemo").show();
                        } else {
                            ShowNoty("error", data.message);
                        }
                    }
                });
            });

            $("#cbxJKR").change(function () {
                if (this.checked) {
                    $("#groupJKR").show();
                } else {
                    $("#groupJKR").hide();
                }
            });
        });

        
        $("#btnRemoveLetter").click(function (e) {
            event.preventDefault();
            $.ajax({
                type: "POST",
                url: "/InstructionLetter/RemoveBDInstructionLetter?LetterRefNo=" + $("#InstructionLetterRefNo").val() + "&bdRefNo=" + $("#hdnRefNo").val(),
                processData: false,
                contentType: false,
                success: function (data) {
                    if (data.response.statusCode == 200) {
                        ShowNoty("success", data.message);
                        $("#InstructionLetterRefNo").removeAttr('disabled');
                        $("#btnNewLetter").show();
                        $("#btnViewLetter").hide();
                        $("#btnRemoveLetter").hide();
                    } else {
                        ShowNoty("error", data.message);
                    }
                }
            });
        });
        $('#btnNewLetter').click(function (event) {
            event.preventDefault();
            window.open("/InstructionLetter/Create", "popupWindow", "width=600,height=600,scrollbars=yes");
        });
        $('#btnViewLetter').click(function (event) {
            event.preventDefault();
            window.open("/InstructionLetter/Letter?LetterRefNo=" + $("#InstructionLetterRefNo").val() , "popupWindow", "width=600,height=600,scrollbars=yes");
        });
        $("#btnRemoveMemo").click(function (e) {
            event.preventDefault();
            $.ajax({
                type: "POST",
                url: "/CoverMemo/RemoveBDCoverMemo?CoverMemoRefNo=" + $("#CoverMemoRefNo").val() + "&bdRefNo=" + $("#hdnRefNo").val(),
                processData: false,
                contentType: false,
                success: function (data) {
                    if (data.response.statusCode == 200) {
                        ShowNoty("success", data.message);
                        $("#CoverMemoRefNo").removeAttr('disabled');
                        $("#btnNewMemo").show();
                        $("#btnViewMemo").hide();
                        $("#btnRemoveMemo").hide();
                    } else {
                        ShowNoty("error", data.message);
                    }
                }
            });
        });
        $('#btnNewMemo').click(function (event) {
            event.preventDefault();
            window.open("/CoverMemo/Create", "popupWindow", "width=600,height=600,scrollbars=yes");
        });
        $('#btnViewMemo').click(function (event) {
            event.preventDefault();
            window.open("/CoverMemo/Memo?CoverMemoRefNo=" + $("#CoverMemoRefNo").val() , "popupWindow", "width=600,height=600,scrollbars=yes");
        });
        $("#btnDraft").on('click', function (e) {
            $("#Status").val("Draft");
            $("#formEditApplication").submit();
        });
        $("#btnSubmitConfirm").on('click', function (e) {
            //if ($('#WCSuratKelulusanVM_File').get(0).files.length === 0) {
            //    var file = $('#hdnWCSuratKelulusan').val();
            //    if (!file) {
            //        $("#confirmation-submit-modal").modal('hide');
            //        ShowNoty("error", "Missing File!");
            //        return false;
            //    }
            //}
            $("#Status").val("Submit");
            $("#formEditApplication").submit();
        });
        $('#btnVerify').on('click', function (e) {
            $("#UserAction").val("Verify");
            $("#formNextAction").submit();
        });
        $('#btnApprove').on('click', function (e) {
            $("#UserAction").val("Approve");
            $("#formNextAction").submit();
        });
        $('#btnRejectVerify').on('click', function (e) {
            $("#UserAction").val("RejectVerify");
            $("#formNextAction").submit();
        });
        $('#btnRejectApprove').on('click', function (e) {
            $("#UserAction").val("RejectApprove");
            $("#formNextAction").submit();
        });
        $('#btnAccept').on('click', function (e) {
            $("#UserAction").val("Accept");
            $("#formNextAction").submit();
        });
        $('#btnDecline').on('click', function (e) {
            $("#UserAction").val("Decline");
            $("#formNextAction").submit();
        });
        $('#btnSaveLetter').on('click', function (e) {
            $("#UserAction").val("SaveLetter");
            $("#formSaveBankDetails").submit();
        });
        $('#btnSubmitToBank').on('click', function (e) {
            $("#UserAction").val("SubmitToBank");
            $("#formSaveBankDetails").submit();
        });
        $('#btnSaveMemo').on('click', function (e) {
            $("#UserAction").val("SaveMemo");
            $("#formSaveBankIssue").submit();
        });
        $('#btnSubmitToRequestor').on('click', function (e) {
            $("#UserAction").val("SubmitToRequestor");
            $("#formSaveBankIssue").submit();
        });
        $('#btnSaveComplete').on('click', function (e) {
            $("#UserAction").val("SaveComplete");
            $("#formSaveBankAcceptance").submit();
        });
        $('#btnComplete').on('click', function (e) {
            $("#UserAction").val("Complete");
            $("#formSaveBankAcceptance").submit();
        });

        $("#formEditApplication").submit(function (e) {

            e.preventDefault(); // avoid to execute the actual submit of the form.

            ShowNoty("warning", "Saving Bank Draft..");

            var form = $(this);
            var url = form.attr('action');
            var fdata = new FormData();

            if ($('#WCSuratKelulusanVM_File').get(0).files.length !== 0) {
                var fileInput = $('#WCSuratKelulusanVM_File')[0];
                var file = fileInput.files[0];
                fdata.append("WCSuratKelulusan", file);
            }

            if ($('#WCUMAPVM_File').get(0).files.length !== 0) {
                var fileInput2 = $('#WCUMAPVM_File')[0];
                var file2 = fileInput2.files[0];
                fdata.append("WCUMAP", file2);
            }

            // You can update the jquery selector to use a css class if you want
            $("input, select, textarea").each(function (x, y) {
                fdata.append($(y).attr("name"), $(y).val());
            });
            
            $.ajax({
                type: "POST",
                url: url,
                data: fdata, //form.serialize(), // serializes the form's elements.
                processData: false,
                contentType: false,
                success: function (data) {
                    if (data.response.statusCode == 200) {
                        ShowNoty("success", data.message);
                        href = "/Application/MyApplication";
                        setTimeout(function () {
                            window.location.href = href;
                        }, 1000);
                    } else {
                        ShowNoty("error", data.message);
                    }
                }
            });
        });
        $("#formNextAction").submit(function (e) {

            e.preventDefault(); // avoid to execute the actual submit of the form.
            ShowNoty("warning", "Updating Application..");

            var form = $(this);
            var url = form.attr('action');
            var fdata = new FormData();
            $("input").each(function (x, y) {
                fdata.append($(y).attr("name"), $(y).val());
            });

            $.ajax({
                type: "POST",
                url: url,
                data: fdata, //form.serialize(), // serializes the form's elements.
                processData: false,
                contentType: false,
                success: function (data) {
                    console.log(data);
                    if (data.response.statusCode == 200) {
                        ShowNoty("success", data.message);
                        //href = "/Application/ManageApplication";
                        //setTimeout(function () {
                        //    window.location.href = href;
                        //}, 1000);
                    } else {
                        ShowNoty("error", data.message);
                    }
                }
            });
        });
        $("#formSaveBankDetails").submit(function (e) {

            e.preventDefault(); // avoid to execute the actual submit of the form.

            ShowNoty("warning", "Saving Bank Draft..");

            var form = $(this);
            var url = form.attr('action');
            var fdata = new FormData();

            if ($('#SignedLetterVM_File').get(0).files.length !== 0) {
                var fileInput = $('#SignedLetterVM_File')[0];
                var file = fileInput.files[0];
                fdata.append("SignedLetter", file);
            }

            // You can update the jquery selector to use a css class if you want
            $("input, select, textarea").each(function (x, y) {
                fdata.append($(y).attr("name"), $(y).val());
            });

            $.ajax({
                type: "POST",
                url: url,
                data: fdata, //form.serialize(), // serializes the form's elements.
                processData: false,
                contentType: false,
                success: function (data) {
                    if (data.response.statusCode == 200) {
                        ShowNoty("success", data.message);
                        //href = "/Application/MyApplication";
                        //setTimeout(function () {
                        //    window.location.href = href;
                        //}, 1000);
                    } else {
                        ShowNoty("error", data.message);
                    }
                }
            });
        });
        $("#formSaveBankIssue").submit(function (e) {

            e.preventDefault(); // avoid to execute the actual submit of the form.

            ShowNoty("warning", "Saving Bank Draft..");

            var form = $(this);
            var url = form.attr('action');
            var fdata = new FormData();

            if ($('#SignedMemoVM_File').get(0).files.length !== 0) {
                var fileInput = $('#SignedMemoVM_File')[0];
                var file = fileInput.files[0];
                fdata.append("SignedMemo", file);
            }

            // You can update the jquery selector to use a css class if you want
            $("input, select, textarea").each(function (x, y) {
                fdata.append($(y).attr("name"), $(y).val());
            });
            $.ajax({
                type: "POST",
                url: url,
                data: fdata, //form.serialize(), // serializes the form's elements.
                processData: false,
                contentType: false,
                success: function (data) {
                    if (data.response.statusCode == 200) {
                        ShowNoty("success", data.message);
                        //href = "/Application/MyApplication";
                        //setTimeout(function () {
                        //    window.location.href = href;
                        //}, 1000);
                    } else {
                        ShowNoty("error", data.message);
                    }
                }
            });
        });
        $("#formSaveBankAcceptance").submit(function (e) {

            e.preventDefault(); // avoid to execute the actual submit of the form.

            ShowNoty("warning", "Saving Bank Draft..");

            var form = $(this);
            var url = form.attr('action');
            var fdata = new FormData();

            if ($('#EvidenceVM_File').get(0).files.length !== 0) {
                var fileInput = $('#EvidenceVM_File')[0];
                var file = fileInput.files[0];
                fdata.append("Evidence", file);
            }

            // You can update the jquery selector to use a css class if you want
            $("input, select, textarea").each(function (x, y) {
                fdata.append($(y).attr("name"), $(y).val());
            });

            $.ajax({
                type: "POST",
                url: url,
                data: fdata, //form.serialize(), // serializes the form's elements.
                processData: false,
                contentType: false,
                success: function (data) {
                    if (data.response.statusCode == 200) {
                        ShowNoty("success", data.message);
                        //href = "/Application/MyApplication";
                        //setTimeout(function () {
                        //    window.location.href = href;
                        //}, 1000);
                    } else {
                        ShowNoty("error", data.message);
                    }
                }
            });
        });

        function RemoveAttachment(id, type) {
            ShowNoty("warning", "Deleting Attachment..");
            $.ajax({
                type: "GET",
                url: "/BankDraft/RemoveAttachment/" + id,
                processData: false,
                contentType: false,
                success: function (data) {
                    if (data.response.statusCode == 200) {
                        $('#hdnWCSuratKelulusan').val("");
                        $('#noFile-' + type).show();
                        $('#hasFile-' + type).hide();
                        ShowNoty("success", data.message);
                    } else {
                        ShowNoty("error", data.message);
                    }
                }
            });
        }
    </script>

}





